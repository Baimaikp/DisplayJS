"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),DisplayJS=function(){function DisplayJS(e){_classCallCheck(this,DisplayJS),this.obj=e}return _createClass(DisplayJS,[{key:"var",value:function(e){var t=this,n=function(){t.if(),t.else();for(var e=document.querySelectorAll("[var]"),n=0;n<e.length;n++){var r=e[n].getAttribute("var");e[n].innerHTML=t.obj[r]}};e?1==e?(n(),this.live(this.obj,function(){n()})):window.setInterval(function(){n()},e):n()}},{key:"render",value:function(e){this.var(e)}},{key:"renderVariables",value:function(e){this.var(e)}},{key:"xss",value:function(e){var t=/</g,n=/>/g,r=/'/g,i=/"/g;return e.toString().replace(t,"&lt;").replace(n,"&gt;").replace(r,"&#39;").replace(i,"&#34;")}},{key:"xssURI",value:function(e){return encodeURI(e)}},{key:"target",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){e.var()},n=document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},r=this.obj;[].forEach.call(document.querySelectorAll("[target]"),function(e,i,o){n(o[i],"change",function(){var e=o[i].getAttribute("target");"checkbox"==this.type?r[e]=this.checked:"select"==this.type?r[e]=this.options[this.selectedIndex].value:r[e]=this.value,t(o[i])}),n(o[i],"keydown",function(){var e=o[i].getAttribute("target");"checkbox"==this.type?r[e]=this.checked:"select"==this.type?r[e]=this.options[this.selectedIndex].value:r[e]=this.value,t(o[i])}),n(o[i],"input",function(){var e=o[i].getAttribute("target");"checkbox"==this.type?r[e]=this.checked:"select"==this.type?r[e]=this.options[this.selectedIndex].value:r[e]=this.value,t(o[i])}),n(o[i],"paste",function(){var e=o[i].getAttribute("target");"checkbox"==this.type?r[e]=this.checked:"select"==this.type?r[e]=this.options[this.selectedIndex].value:r[e]=this.value,t(o[i])})})}},{key:"if",value:function _if(push){var _this3=this,if_push=function if_push(){for(var elements=document.querySelectorAll("[if]"),i=0;i<elements.length;i++){var attr=elements[i].getAttribute("if"),el=[];el.push(elements[i]),eval(_this3.obj[attr])?_this3.show(el):_this3.hide(el)}};push?1==push?(if_push(),this.live(this.obj,function(){if_push()})):window.setInterval(function(){if_push()},push):if_push()}},{key:"else",value:function _else(push){var _this4=this,else_push=function else_push(){for(var elements=document.querySelectorAll("[else]"),i=0;i<elements.length;i++){var attr=elements[i].getAttribute("else"),el=[];el.push(elements[i]),eval(_this4.obj[attr])?_this4.hide(el):_this4.show(el)}};push?1==push?(else_push(),this.live(this.obj,function(){else_push()})):window.setInterval(function(){else_push()},push):else_push()}},{key:"repeat",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";e=this.s(e);var o=r;if("object"==(void 0===n?"undefined":_typeof(n)))for(var a=0;a<t.length;a++)o+=n[a]+String(t[a]);else for(var s=0;s<t.length;s++)o+=n+String(t[s]);o+=i,e[0].innerHTML=o}},{key:"onEvent",value:function onEvent(){for(var elements=document.querySelectorAll("[on]"),_loop=function _loop(i){var attr=elements[i].getAttribute("on"),action=elements[i].getAttribute("action");elements[i].addEventListener(attr,function(){eval(action)})},i=0;i<elements.length;i++)_loop(i)}},{key:"all",value:function(e,t){(e=this.s(e)).forEach(function(e){var n=[];n.push(e),t(n)})}},{key:"text",value:function(e,t){(e=this.s(e))[0].innerHTML=this.xss(t)}},{key:"html",value:function(e,t){(e=this.s(e))[0].innerHTML=t}},{key:"append",value:function(e,t){(e=this.s(e))[0].innerHTML+=t}},{key:"after",value:function(e,t){(e=this.s(e))[0].insertAdjacentHTML("afterend",t)}},{key:"before",value:function(e,t){(e=this.s(e))[0].insertAdjacentHTML("beforebegin",t)}},{key:"clone",value:function(e){e[0].cloneNode(!0)}},{key:"is",value:function(e,t){return e=this.s(e),t=this.s(t),e[0]===t[0]}},{key:"select",value:function(e){return this.isElement(e[0])?new Array(e[0]):document.querySelectorAll(e)}},{key:"single",value:function(e){return this.isElement(e)?e:document.querySelector(e)}},{key:"s",value:function(e){return this.select(e)}},{key:"empty",value:function(e){(e=this.s(e))[0].innerHTML=null}},{key:"valEmpty",value:function(e){(e=this.s(e))[0].value=null}},{key:"remove",value:function(e){(e=this.s(e))[0].parentNode.removeChild(e[0])}},{key:"on",value:function(e,t,n){(e=this.s(e))[0].addEventListener(t,n)}},{key:"ready",value:function(e){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}},{key:"scroll",value:function(e){window.addEventListener("scroll",e)}},{key:"scrollTo",value:function(e,t){window.scroll(e,t)}},{key:"scrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[document.body];return(e=this.s(e))[0].scrollTop}},{key:"show",value:function(e){return e=this.s(e),e[0].style.display="block",!0}},{key:"hide",value:function(e){return e=this.s(e),e[0].style.display="none",!0}},{key:"hasClass",value:function(e,t){return(e=this.s(e))[0].classList?e[0].classList.contains(t):!!e[0].className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},{key:"addClass",value:function(e,t){(e=this.s(e))[0].classList?e[0].classList.add(t):this.hasClass(e,t)||(e[0].className+=" "+t)}},{key:"removeClass",value:function(e,t){if((e=this.s(e))[0].classList)e[0].classList.remove(t);else if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e[0].className=e[0].className.replace(n," ")}}},{key:"toggleClass",value:function(e,t){e=this.s(e),this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)}},{key:"css",value:function(e,t,n){(e=this.s(e))[0].style[t]=n}},{key:"getStyle",value:function(e,t){return(e=this.s(e))[0].style[t]}},{key:"fadeOut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;(e=this.s(e)[0]).style.opacity=1,function n(){(e.style.opacity-=t)<0?e.style.display="none":requestAnimationFrame(n)}()}},{key:"fadeIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments[2];(e=this.s(e)[0]).style.opacity=0,e.style.display=n||"block",function n(){var r=parseFloat(e.style.opacity);(r+=t)>1||(e.style.opacity=r,requestAnimationFrame(n))}()}},{key:"dynamic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;window.setInterval(e,t)}},{key:"parent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(e=this.s(e))[0];for(var r in this.range(t))n=n.parentNode;return new Array(n)}},{key:"isNode",value:function(e){return e=this.s(e),"object"===("undefined"==typeof Node?"undefined":_typeof(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"isElement",value:function(e){return e=this.s(e),"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":_typeof(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"component",value:function(e,t){var n=function(e){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t(e),e}return _inherits(n,HTMLElement),n}();customElements.define(e,n)}},{key:"import",value:function(e,t){var n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.async=1,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n=void 0,r||t&&t())},n.src=e,r.parentNode.insertBefore(n,r)}},{key:"extend",value:function(e,t){var n={},r=void 0;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}},{key:"arange",value:function(e,t,n,r){var i=(Math.abs(t-e)+2*(r||0))/(n||1)+1,o=e<t?1:-1,a=e-o*(r||0),s=o*(n||1);return Array(i).fill(0).map(function(e,t){return a+s*t})}},{key:"range",value:function(e){return this.arange(0,e,1)}},{key:"linespace",value:function(e,t,n){var r=(t-e)/n;return this.arange(e,t,r)}},{key:"reshape",value:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},{key:"flatten",value:function(e){return e.reduce(function(e,t){return e.concat(t)},[])}},{key:"drop",value:function(e,t){return t>0?e.slice(t,e.length):e.slice(0,e.length-t)}},{key:"isIn",value:function(e,t){return!!e.includes(t)}},{key:"rmFromArray",value:function(e,t){var n=[];for(var r in e)t(r)||n.push(e[r]);return n}},{key:"load",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e=this.s(e),this.ajax(t,"GET","",function(t){try{document.querySelector(e).innerHTML=t.responseXML.querySelector(e),n()}catch(e){n(e)}})}},{key:"ajax",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"application/x-www-form-urlencoded; charset=UTF-8",o=new XMLHttpRequest;o.open(t,e,!0),o.setRequestHeader("Content-Type",i),o.onload=function(){if(o.status>=200&&o.status<400){var e=o.responseText;r(e)}else console.error("DisplayJS error: The ajax request returned an error.")},o.onerror=function(){console.error("DisplayJS error: The ajax request returned an error.")},o.send(n)}},{key:"custom",value:function(e,t,n){var r=function(){for(var n=document.querySelectorAll("["+e+"]"),r=0;r<n.length;r++){var i=n[r].getAttribute(e);t(n[r],i)}};n?1==n?(r(),this.live(this.obj,function(){r()})):window.setInterval(function(){r()},n):r()}},{key:"live",value:function(e,t){({watch:function(e,t,n){if(void 0===Object.getOwnPropertyDescriptor(e,t))throw new Error("DisplayJS: Invalid descriptor for property: "+t+", object: "+e);if("function"!=typeof n)throw new Error("DisplayJS: Invalid onPropertyChange handler: "+n);var r=e[t];Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return r},set:function(i){if(i!==r)return n(e,t,i,r),r=i}})},watchAll:function(e,t){if("function"!=typeof t)throw new Error("DisplayJS: Invalid onPropertyChange handler: "+t);for(var n in e)this.watch(e,n,t)}}).watchAll(e,function(e,n,r,i){t(e,n,r,i)})}},{key:"time_ago",value:function(e){switch(void 0===e?"undefined":_typeof(e)){case"number":break;case"string":e=+new Date(e);break;case"object":e.constructor===Date&&(e=e.getTime());break;default:e=+new Date}var t=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"Yesterday","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"Last month","Next month"],[29030400,"months",2419200],[58060800,"Last year","Next year"],[290304e4,"years",29030400],[580608e4,"Last century","Next century"],[580608e5,"centuries",290304e4]],n=this.math,r=n.div(n.sub(+new Date,e),1e3),i="ago",o=1;if(0==r)return"Just now";r<0&&(r=Math.abs(r),i="from now",o=2);for(var a=0,s=void 0;s=t[a++];)if(r<s[0])return"string"==typeof s[2]?s[o]:Math.floor(n.div(r,s[2]))+" "+s[1]+" "+i;return s=t[t.length-1],Math.floor(n.div(r,s[2]))+" "+s[1]+" "+i}},{key:"sum",value:function(e){var t=this;return e.reduce(function(e,n){return t.math.add(e,n)},0)}},{key:"multiply",value:function(e){var t=this;return e.reduce(function(e,n){return t.math.mul(e,n)},0)}},{key:"average",value:function(e){var t=this.sum(e),n=this.math.div(t,e.length);return n}},{key:"median",value:function(e){var t=this;e.sort(function(e,n){return t.math.sub(e,n)});var n=Math.floor(this.math.div(e.length,2));return e.length%2?e[n]:this.math.div(this.math.add(e[n-1],e[n]),2)}},{key:"predict",value:function(e,t){function n(t,n){var r=e[0][0],o=e[1][0],a=e[0][1],s=e[1][1],u=i.math.div(i.math.sub(a,s),i.math.sub(r,o)),l=i.math.sub(s,i.math.mul(o,u));return 1==n?"f(x) = "+u+"x+"+l+"; f("+t+") = "+(t*u+l):t*u+l}var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;return function(e){return!(e.length>2)||n(e[2][0],!1)==e[2][1]}(e)?n(t,r):"DisplayJS: Error, can't find any pattern."}},{key:"fn",get:function(){return DisplayJS.prototype}},{key:"math",get:function(){var e={add:function(){return t.addSubDiv(arguments,0)},sub:function(){return t.addSubDiv(arguments,1)},mul:function(){return t.mul(arguments)},div:function(){return t.addSubDiv(arguments,3)}},t={addSubDiv:function(e,t){var n=this.countDecimals(this.validMe(e)),r=this.biggestComma(n),i=3!==t?r:0,o=this.shiftComma(this.countResult(this.toExponent(n,r),t),i);return this.isSafeInteger(o),o},mul:function(e){var t=this.countDecimals(this.validMe(e)),n=[],r=0;for(var i in t)r+=t[i].comma,n.push(t[i].integer);return this.shiftComma(this.countResult(n,2),r)},isSafeInteger:function(e){if(e<=-(Math.pow(2,53)-1)||e>=Math.pow(2,53)-1)throw"DisplayJS: The result is not a safe integer."},shiftComma:function(e,t){return this.toExponent(this.countDecimals([e]),-t)[0]},countResult:function(e,t){for(var n=e[0],r=1;r<e.length;r++)switch(t){case 0:n+=e[r];break;case 1:n-=e[r];break;case 2:n*=e[r];break;case 3:n/=e[r]}return n},toExponent:function(e,t){var n=[];for(var r in e){e[r].comma-=t;var i=e[r].comma>=0?"+":"";n.push(Number(e[r].integer.toString()+"e"+i+e[r].comma))}return n},biggestComma:function(e){var t=[];for(var n in e)t.push(e[n].comma);return Math.min.apply(null,t)},validMe:function(e){if(e.length<2)throw"DisplayJS: Set at least two numerical values.";for(var t in e){if(e[t]=parseFloat(e[t]),"number"!=typeof e[t]||isNaN(e[t]))throw"DisplayJS: Every Math argument must be of type number.";if(e[t]===Number.POSITIVE_INFINITY||e[t]===Number.NEGATIVE_INFINITY)throw"DisplayJS: Every Math argument must be a numerical value between positive and negative Infinity."}return e},countDecimals:function(e){var t=[];for(var n in e){var r=0,i=e[n].toString().split("e"),o=i[0].indexOf(".");r-=-1!==o?i[0].length-1-o:0,r+=isNaN(Number(i[1]))?0:Number(i[1]),i[0]=Number(i[0].replace(".","")),t.push({integer:i[0],comma:r})}return t}};return e}}]),DisplayJS}();"function"==typeof define&&define.amd?define(function(){return new DisplayJS}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=new DisplayJS),exports.DisplayJS=new DisplayJS):"undefined"!=typeof global&&(global.DisplayJS=new DisplayJS);